<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>FormattingDecimals.pg</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script
		src="https://cdn.jsdelivr.net/npm/@openwebwork/pg-codemirror-editor@0.0.5/dist/pg-codemirror-editor.js"
		defer></script>
	<link rel="stylesheet" href="https://openwebwork.github.io/pg-docs/sample-problems/sample-problem.css">
</head>


<body>
	<div class="container-fluid p-3">
		<div class="row">
			<div class="col">
				<h1>Formatting Decimals</h1>
				<p>Formatting decimals and using logarithmic functions.</p>
			</div>
			<div class="col text-end">
				<a href="https://openwebwork.github.io/pg-docs/sample-problems/../">Return to the PG docs home</a>
</div>
		</div>
		<div class="row">
			<div class="col">
				<h2>Complete Code</h2>
				<p>Download file: <a href="FormattingDecimals.pg">FormattingDecimals.pg</a></p>
</div>
		</div>
		<div class="row">
			<div class="col text-center"><h2 class="fw-bold fs-3">PG problem file</h2></div>
			<div class="col text-center"><h2 class="fw-bold fs-3">Explanation</h2></div>
		</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1"
						type="button" data-code="DOCUMENT();
loadMacros(&#39;PGstandard.pl&#39;, &#39;PGML.pl&#39;, &#39;PGcourse.pl&#39;);
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>
						</svg>
					</button>
					<pre class="PGCodeMirror m-0 h-100 p-3 border border-secondary overflow-x-scroll">DOCUMENT();
loadMacros(&#39;PGstandard.pl&#39;, &#39;PGML.pl&#39;, &#39;PGcourse.pl&#39;);
</pre>
				</div>
				<div class="explanation preamble col-sm-12 col-md-6 order-md-last order-first p-3 border border-dark">
					<p><b>Preamble</b></p>
						These standard macros need to be loaded.
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1"
						type="button" data-code="Context()-&gt;variables-&gt;set(x =&gt; { limits =&gt; [ 0.1, 4 ] });

$a = random(3, 7);

$ans1 = Real(Round(ln($a), 3));

$ans2 = Formula(&#39;ln(x)&#39;)-&gt;eval(x =&gt; $a);

$ans3 = Real(Round(ln($a) / ln(10), 3));

$ans4 = Formula(&#39;ln(x) / ln(10)&#39;)-&gt;eval(x =&gt; $a);
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>
						</svg>
					</button>
					<pre class="PGCodeMirror m-0 h-100 p-3 border border-secondary overflow-x-scroll">Context()-&gt;variables-&gt;set(x =&gt; { limits =&gt; [ 0.1, 4 ] });

$a = random(3, 7);

$ans1 = Real(Round(ln($a), 3));

$ans2 = Formula(&#39;ln(x)&#39;)-&gt;eval(x =&gt; $a);

$ans3 = Real(Round(ln($a) / ln(10), 3));

$ans4 = Formula(&#39;ln(x) / ln(10)&#39;)-&gt;eval(x =&gt; $a);
</pre>
				</div>
				<div class="explanation setup col-sm-12 col-md-6 order-md-last order-first p-3 border border-dark">
					<p><b>Setup</b></p>
						<p>Since the domain of a logarithmic function is all positive real
numbers, the domain for function evaluation with the variable
<code>x</code> is set to <code>[0.1, 4]</code>.</p>
<p>This example used to use Perl’s <code>sprintf(format, number)</code>
command to format the decimal. The format <code>'%0.3f'</code> rounds to
3 decimal places and ensures precisely 3 decimal places with 0 padding.
However, Perl rounding via <code>sprintf</code> is not entirely reliable
due to finite precision representation of floating point numbers. For
example, <code>sprintf('%0.2f', 100.255)</code> gives
<code>100.25</code> (this is because the binary representation of
<code>100.255</code> actually rounds to <code>100.254999999999995</code>
accurate to 15 decimal places). So this example now uses
<code>Round</code> from <a
href="https://openwebwork.github.io/pg-docs/pod/pg/macros/core/PGauxiliaryFunctions.html">PGauxiliaryFunctions.pl</a>
(which is loaded by <a
href="https://openwebwork.github.io/pg-docs/pod/pg/macros/core/PGstandard.html">PGstandard.pl</a>)
for more reliable rounding. The format for calling <code>Round</code> is
<code>Round(number, number of decimal places)</code>. Be aware that if
further calculations are performed with a number that has been rounded,
numerical error may still be an issue.</p>
<p>So in short, do not use <code>sprintf</code> for rounding in problems
as was previously done in this example.</p>
<p>The logarithmic change of base formula
<code>log10(a) = log(a) / log(10) = ln(a) / ln(10)</code> can be used to
compute a logarithm with base 10. The functions <code>log10</code> and
<code>logten</code> are also defined which can be used for this.</p>
<p>Note that if
<code>Context()-&gt;flags-&gt;set(useBaseTenLog =&gt; 1)</code> is
called, then the <code>log</code> function will be the logarithm with
base 10. By default the <code>useBaseTenLog</code> flag is 0, and the
<code>log</code> function is the natural logarithm.</p>
<p>If a function for log base 2 (or another base) is needed see <a
href="https://openwebwork.github.io/pg-docs/sample-problems/ProblemTechniques/DefiningFunctions.html">Defining
Functions in a Context</a> for how to define and add a new function to
the context so that students can enter it in their answers.</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1"
						type="button" data-code="BEGIN_PGML
Notice the formatting and rounding differences between [`[$ans1]`] and
[`[$ans2]`].

Try entering [`\ln([$a])`], [`\log([$a])`], [`\ln([$a]) / \ln(10)`],
[`\log([$a]) / \log(10)`], [`\mathrm{logten}([$a])`], or
[`\mathrm{log10}([$a]) `].

1. [`\ln([$a]) =`] [_]{$ans1}{10}

2. [`\ln([$a]) =`] [_]{$ans2}{10}

3. [`\log_{10}([$a]) =`] [_]{$ans3}{10}

4. [`\log_{10}([$a]) =`] [_]{$ans4}{10}
END_PGML
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>
						</svg>
					</button>
					<pre class="PGCodeMirror m-0 h-100 p-3 border border-secondary overflow-x-scroll">BEGIN_PGML
Notice the formatting and rounding differences between [`[$ans1]`] and
[`[$ans2]`].

Try entering [`\ln([$a])`], [`\log([$a])`], [`\ln([$a]) / \ln(10)`],
[`\log([$a]) / \log(10)`], [`\mathrm{logten}([$a])`], or
[`\mathrm{log10}([$a]) `].

1. [`\ln([$a]) =`] [_]{$ans1}{10}

2. [`\ln([$a]) =`] [_]{$ans2}{10}

3. [`\log_{10}([$a]) =`] [_]{$ans3}{10}

4. [`\log_{10}([$a]) =`] [_]{$ans4}{10}
END_PGML
</pre>
				</div>
				<div class="explanation statement col-sm-12 col-md-6 order-md-last order-first p-3 border border-dark">
					<p><b>Statement</b></p>
						<p>Notice the difference in decimal formatting when “Show Correct
Answers” is clicked versus when “Submit Answers” is clicked.</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1"
						type="button" data-code="BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>
						</svg>
					</button>
					<pre class="PGCodeMirror m-0 h-100 p-3 border border-secondary overflow-x-scroll">BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();</pre>
				</div>
				<div class="explanation solution col-sm-12 col-md-6 order-md-last order-first p-3 border border-dark">
					<p><b>Solution</b></p>
						A solution should be provided here.
				</div>
			</div>
	</div>

	<script type="module">
		for (const pre of document.body.querySelectorAll('pre.PGCodeMirror')) {
			PGCodeMirrorEditor.runMode(pre.textContent, pre);
		}

		for (const btn of document.querySelectorAll('.clipboard-btn')) {
			if (navigator.clipboard)
				btn.addEventListener('click', () => navigator.clipboard.writeText(btn.dataset.code));
			else btn?.remove();
		}
	</script>
</body>

</html>

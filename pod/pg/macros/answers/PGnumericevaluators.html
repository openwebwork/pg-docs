<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset='UTF-8'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>answers/PGnumericevaluators.pl</title>
	<link rel="shortcut icon" href="/favicon.ico">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://openwebwork.github.io/pg-docs/pod/assets/podviewer.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" defer></script>
	<script src="https://openwebwork.github.io/pg-docs/pod/assets/podviewer.js" defer></script>
</head>
<body>
	<div class="pod-header navbar navbar-dark bg-primary px-3 position-fixed border-bottom border-dark">
		<div class="container-fluid d-flex flex-column d-md-block">
			<h1 class="navbar-brand fw-bold fs-5 me-auto me-md-0 mb-2 mb-md-0">answers/PGnumericevaluators.pl</h1>
			<button class="navbar-toggler d-md-none me-auto" type="button" data-bs-toggle="offcanvas"
				data-bs-target="#sidebar" aria-controls="sidebar" aria-label="Toggle Sidebar">
				<span class="navbar-toggler-icon"></span>
			</button>
		</div>
	</div>
	<aside class="offcanvas-md offcanvas-start border-end border-dark position-fixed" tabindex="-1"
		id="sidebar" aria-labelledby="sidebar-label">
		<div class="offcanvas-header">
			<h2 class="offcanvas-title" id="sidebar-label">Index</h2>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebar"
			   	aria-label="Close">
			</button>
		</div>
		<div class="offcanvas-body p-md-3 w-100">
			<nav>
				<ul class="nav flex-column w-100">
					<li class="nav-item">
						<a href="https://openwebwork.github.io/pg-docs/pod" class="nav-link p-0">WeBWorK POD Home</a>
					</li>
					<li class="nav-item">
						<a href="http://webwork.maa.org/wiki/WeBWorK_Main_Page" class="nav-link p-0">WeBWorK Wiki</a>
					</li>
					<li><hr></li>
<li class="nav-item"><a class="nav-link p-0" href="#NAME">NAME</a></li><li class="nav-item"><a class="nav-link p-0" href="#SYNOPSIS">SYNOPSIS</a></li><li class="nav-item"><a class="nav-link p-0" href="#DESCRIPTION">DESCRIPTION</a>
    <ul class="nav flex-column w-100">
      <li class="nav-item"><a class="nav-link p-0" href="#MathObjects-and-answer-evaluators">MathObjects and answer evaluators</a></li>
    </ul>
  </li><li class="nav-item"><a class="nav-link p-0" href="#num_cmp">num_cmp</a>
    <ul class="nav flex-column w-100">
      <li class="nav-item"><a class="nav-link p-0" href="#Options">Options</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#Examples">Examples</a></li>
    </ul>
  </li><li class="nav-item"><a class="nav-link p-0" href="#mode_num_cmp-functions">&quot;mode&quot;_num_cmp() functions</a>
    <ul class="nav flex-column w-100">
      <li class="nav-item"><a class="nav-link p-0" href="#The-normal-group">The normal group</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#The-list-group">The list group</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#The-abs-group">The abs group</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#The-abs_list-group">The abs_list group</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#Examples1">Examples</a></li>
    </ul>
  </li><li class="nav-item"><a class="nav-link p-0" href="#Miscellaneous-functions">Miscellaneous functions</a>
    <ul class="nav flex-column w-100">
      <li class="nav-item"><a class="nav-link p-0" href="#DEPRECATED-numerical_compare_with_units">[DEPRECATED] numerical_compare_with_units</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#DEPRECATED-std_num_str_cmp">[DEPRECATED] std_num_str_cmp()</a></li>
    </ul>
  </li><li class="nav-item"><a class="nav-link p-0" href="#SEE-ALSO">SEE ALSO</a></li>				</ul>
			</nav>
		</div>
	</aside>
	<div class="pod-page-container d-flex">
		<div class="container-fluid p-3 h-100" id="_podtop_">


<a href="#_podtop_"><h1 id="NAME">NAME</h1></a>

<p>PGnumericevaluators.pl - Macros that generate numeric answer evaluators.</p>

<a href="#_podtop_"><h1 id="SYNOPSIS">SYNOPSIS</h1></a>

<pre><code>ANS(num_cmp($answer_or_answer_array_ref, %options_hash));

ANS(std_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(std_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(std_num_cmp_list($relTol, $format, @answerList));
ANS(std_num_cmp_abs_list($absTol, $format, @answerList));

ANS(arith_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(arith_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(arith_num_cmp_list($relTol, $format, @answerList));
ANS(arith_num_cmp_abs_list($absTol, $format, @answerList));

ANS(strict_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(strict_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(strict_num_cmp_list($relTol, $format, @answerList));
ANS(strict_num_cmp_abs_list($absTol, $format, @answerList));

ANS(frac_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(frac_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(frac_num_cmp_list($relTol, $format, @answerList));
ANS(frac_num_cmp_abs_list($absTol, $format, @answerList));</code></pre>

<a href="#_podtop_"><h1 id="DESCRIPTION">DESCRIPTION</h1></a>

<p>Numeric answer evaluators take in a numerical answer, compare it to the correct answer, and return a score. In addition, they can choose to accept or reject an answer based on its format, closeness to the correct answer, and other criteria.</p>

<p>The general numeric answer evaluator is num_cmp(). It takes a hash of named options as parameters. There are also sixteen specific &quot;mode&quot;_num_cmp() answer evaluators for use in common situations which feature a simplified syntax.</p>

<h2 id="MathObjects-and-answer-evaluators">MathObjects and answer evaluators</h2>

<p>The MathObjects system provides $obj-&gt;cmp() methods that produce answer evaluators for a wide variety of answer types. num_cmp() has been rewritten to use the appropriate MathObject to produce the answer evaluator. It is recommended that you use the MathObjects cmp() methods directly if possible.</p>

<a href="#_podtop_"><h1 id="num_cmp">num_cmp</h1></a>

<pre><code>ANS(num_cmp($answer_or_answer_array_ref, %options));</code></pre>

<p>num_cmp() returns one or more answer evaluators (subroutine references) that compare the student&#39;s answer to a numeric value. Evaluation options are specified as items in the %options hash. This can make for more readable code than using the &quot;mode&quot;_num_cmp() style, but some people find one or the other easier to remember.</p>

<h2 id="Options">Options</h2>

<p>$answer_or_answer_array_ref can either be a scalar containing a numeric value or a reference to an array of numeric scalars. If multiple answers are provided, num_cmp() will return a list of answer evaluators, one for each answer specified. %options is a hash containing options that affect the way the comparison is performed. All hash items are optional. Allowed options are:</p>

<dl>

<dt>mode</dt>
<dd>

<p>This determines the allowable methods for entering an answer. Answers which do not meet this requirement will be graded as incorrect, regardless of their numerical value. The recognized modes are:</p>

<dl>

<dt>std (default)</dt>
<dd>

<p>The default mode allows any expression which evaluates to a number, including those using elementary functions like sin() and exp(), as well as the operations of arithmetic (+, -, *, /, and ^).</p>

</dd>
<dt>strict</dt>
<dd>

<p>Only decimal numbers are allowed.</p>

</dd>
<dt>frac</dt>
<dd>

<p>Only whole numbers and fractions are allowed.</p>

</dd>
<dt>arith</dt>
<dd>

<p>Arithmetic expressions are allowed, but no functions.</p>

</dd>
</dl>

<p>Note that all modes allow the use of &quot;pi&quot; and &quot;e&quot; as constants, and also the use of &quot;E&quot; to represent scientific notation.</p>

</dd>
<dt>format</dt>
<dd>

<p>The format to use when displaying the correct and submitted answers. This has no effect on how answers are evaluated; it is only for cosmetic purposes. The formatting syntax is the same as Perl uses for the sprintf() function. Format strings are of the form &#39;%m.nx&#39; or &#39;%m.nx#&#39;, where m and n are described below, and x is a formatter.</p>

<p>Esentially, m is the minimum length of the field (make this negative to left-justify). Note that the decimal point counts as a character when determining the field width. If m begins with a zero, the number will be padded with zeros instead of spaces to fit the field.</p>

<p>The precision specifier (n) works differently depending on which formatter you are using. For d, i, o, u, x and X formatters (non-floating point formatters), n is the minimum number of digits to display. For e and f, it is the number of digits that appear after the decimal point (extra digits will be rounded; insufficient digits will be padded with spaces--see &#39;#&#39; below). For g, it is the number of significant digits to display.</p>

<p>The full list of formatters can be found in the manpage for printf(3), or by typing &quot;perldoc -f sprintf&quot; at a terminal prompt. The following is a brief summary of the most frequent formatters:</p>

<pre><code>%d     decimal number
%ld    long decimal number
%u     unsigned decimal number
%lu    long unsigned decimal number
%x     hexadecimal number
%o     octal number
%e     floating point number in scientific notation
%f     floating point number
%g     either %e or %f, whichever takes less space</code></pre>

<p>Technically, %g will use %e if the exponent is less than -4 or greater than or equal to the precision. Trailing zeros are removed in this mode.</p>

<p>If the format string ends in &#39;#&#39;, trailing zeros will be removed in the decimal part. Note that this is not a standard syntax; it is handled internally by WeBWorK and not by Perl (although this should not be a concern to end users). The default format is &#39;%0.5f#&#39;, which displays as a floating point number with 5 digits of precision and no trailing zeros. Other useful format strings might be &#39;%0.2f&#39; for displaying dollar amounts, or &#39;%010d&#39; to display an integer with leading zeros. Setting format to an empty string ( &#39;&#39; ) means no formatting will be used; this will show &#39;arbitrary&#39; precision floating points.</p>

</dd>
<dt>tol</dt>
<dd>

<p>An absolute tolerance value. The student answer must be a fixed distance from the correct answer to qualify. For example, an absolute tolerance of 5 means that any number which is +-5 of the correct answer qualifies as correct. abstol is accepted as a synonym for tol.</p>

</dd>
<dt>relTol</dt>
<dd>

<p>A relative tolerance. Relative tolerances are given in percentages. A relative tolerance of 1 indicates that the student answer must be within 1% of the correct answer to qualify as correct. In other words, a student answer is correct when</p>

<pre><code>abs(studentAnswer - correctAnswer) &lt;= abs(.01*relTol*correctAnswer)</code></pre>

<p>tol and relTol are mutually exclusive. reltol is also accpeted as a synonym for relTol.</p>

</dd>
<dt>zeroLevel, zeroLevelTol</dt>
<dd>

<p>zeroLevel and zeroLevelTol specify a alternative absolute tolerance to use when the correct answer is very close to zero.</p>

<p>If the correct answer has an absolute value less than or equal to zeroLevel, then the student answer must be, in absolute terms, within zeroLevelTol of correctAnswer, i.e.,</p>

<pre><code>abs(studentAnswer - correctAnswer) &lt;= zeroLevelTol</code></pre>

<p>In other words, if the correct answer is very near zero, an absolute tolerance will be used. One must do this to handle floating point answers very near zero, because of the inaccuracy of floating point arithmetic. However, the default values are almost always adequate.</p>

</dd>
<dt>units</dt>
<dd>

<p>A string representing the units of the correct answer. If specified, the student answer must include these units. The strings and units options are mutually exclusive.</p>

</dd>
<dt>strings</dt>
<dd>

<p>A reference to an array of strings which are valid (but incorrect) answers. This prevents non-numeric entries like &quot;NaN&quot; or &quot;None&quot; from causing a syntax error. The strings and units options are mutually exclusive.</p>

</dd>
<dt>debug</dt>
<dd>

<p>If set to 1, extra debugging information will be output.</p>

</dd>
</dl>

<h2 id="Examples">Examples</h2>

<pre><code># correct answer is 5, using defaults for all options
num_cmp(5);

# correct answers are 5, 6, and 7, using defaults for all options
num_cmp([5,6,7]);

# correct answer is 5, mode is strict
num_cmp(5, mode=&gt;&#39;strict&#39;);

# correct answers are 5 and 6, both with 5% relative tolerance
num_cmp([5,6], relTol=&gt;5);

# correct answer is 6, &quot;Inf&quot;, &quot;Minf&quot;, and &quot;NaN&quot; recognized as valid, but
# incorrect answers.
num_cmp(6, strings=&gt;[&quot;Inf&quot;, &quot;Minf&quot;, &quot;NaN&quot;]);

# correct answer is &quot;-INF&quot;, &quot;INF&quot; and numerical expressions recognized as
# valid, but incorrect answers.
num_cmp(&quot;-INF&quot;, strings =&gt; [&quot;INF&quot;, &quot;-INF&quot;]);</code></pre>

<a href="#_podtop_"><h1 id="mode_num_cmp-functions">&quot;mode&quot;_num_cmp() functions</h1></a>

<p>There are 16 functions that provide simplified interfaces to num_cmp(). They are organized into four groups, based on the number of answers accpeted (single or list) and whether relative or absolute tolerances are used. Each group contains four functions, one for each evaluation mode. See the mode option to num_cmp() above for details about each mode.</p>

<pre><code>GROUP:|    &quot;normal&quot;    |       &quot;list&quot;        |       &quot;abs&quot;        |        &quot;abs_list&quot;       |
      | single answer  |   list of answers   |   single answer    |     list of answers     |
MODE:  | relative tol.  | relative tolerance  | absolute tolerance |    absolute tolerance   |
-------+----------------+---------------------+--------------------+-------------------------+
  std |    std_num_cmp |    std_num_cmp_list |    std_num_cmp_abs |    std_num_cmp_abs_list |
 frac |   frac_num_cmp |   frac_num_cmp_list |   frac_num_cmp_abs |   frac_num_cmp_abs_list |
strict | strict_num_cmp | strict_num_cmp_list | strict_num_cmp_abs | strict_num_cmp_abs_list |
arith |  arith_num_cmp |  arith_num_cmp_list |  arith_num_cmp_abs |  arith_num_cmp_abs_list |</code></pre>

<p>The functions in each group take the same arguments.</p>

<h2 id="The-normal-group">The normal group</h2>

<pre><code>ANS(std_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(arith_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(strict_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));
ANS(frac_num_cmp($correctAnswer, $relTol, $format, $zeroLevel, $zeroLevelTol));</code></pre>

<p>This group of functions produces answer evaluators for a single correct answer using relative tolerances. The first argument, $correctAnswer, is required. The rest are optional. The arguments are equivalent to the identically-named options to num_cmp(), above.</p>

<h2 id="The-list-group">The list group</h2>

<pre><code>ANS(std_num_cmp_list($relTol, $format, @answerList));
ANS(arith_num_cmp_list($relTol, $format, @answerList));
ANS(strict_num_cmp_list($relTol, $format, @answerList));
ANS(frac_num_cmp_list($relTol, $format, @answerList));</code></pre>

<p>This group of functions produces answer evaluators for a list of correct answers using relative tolerances. $relTol and $format are equivelent to the identically-named options to num_cmp() above. @answerList must contain one or more correct answers. A list of answer evaluators is returned, one for each answer provided in @answerList. All answer returned evaluators will use the relative tolerance and format specified.</p>

<h2 id="The-abs-group">The abs group</h2>

<pre><code>ANS(std_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(arith_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(strict_num_cmp_abs($correctAnswer, $absTol, $format));
ANS(frac_num_cmp_abs($correctAnswer, $absTol, $format));</code></pre>

<p>This group of functions produces answer evaluators for a single correct answer using absolute tolerances. The first argument, $correctAnswer, is required. The rest are optional. The arguments are equivalent to the identically-named options to num_cmp(), above.</p>

<h2 id="The-abs_list-group">The abs_list group</h2>

<pre><code>ANS(std_num_cmp_abs_list($absTol, $format, @answerList));
ANS(arith_num_cmp_abs_list($absTol, $format, @answerList));
ANS(strict_num_cmp_abs_list($absTol, $format, @answerList));
ANS(frac_num_cmp_abs_list($absTol, $format, @answerList));</code></pre>

<p>This group of functions produces answer evaluators for a list of correct answers using absolute tolerances. $absTol and $format are equivelent to the identically-named options to num_cmp() above. @answerList must contain one or more correct answers. A list of answer evaluators is returned, one for each answer provided in @answerList. All answer returned evaluators will use the absolute tolerance and format specified.</p>

<h2 id="Examples1">Examples</h2>

<pre><code># The student answer must be a number in decimal or scientific notation
# which is within .1 percent of 3.14159. This assumes
# $numRelPercentTolDefault has been set to .1.
ANS(strict_num_cmp(3.14159));

# The student answer must be a number within .01 percent of $answer (e.g. #
3.14159 if $answer is 3.14159 or $answer is &quot;pi&quot; or $answer is 4*atan(1)).
ANS(strict_num_cmp($answer, .01));

# The student answer can be a number or fraction, e.g. 2/3.
ANS(frac_num_cmp($answer)); # or
ANS(frac_num_cmp($answer, .01));

# The student answer can be an arithmetic expression, e.g. (2+3)/7-2^.5 .
ANS(arith_num_cmp($answer)); # or
ANS(arith_num_cmp($answer, .01));

# The student answer can contain elementary functions, e.g. sin(.3+pi/2)
ANS(std_num_cmp($answer)); # or
ANS(std_num_cmp( $answer, .01));</code></pre>

<a href="#_podtop_"><h1 id="Miscellaneous-functions">Miscellaneous functions</h1></a>

<h2 id="DEPRECATED-numerical_compare_with_units">[DEPRECATED] numerical_compare_with_units</h2>

<pre><code>ANS(numerical_compare_with_units($correct_ans_with_units, %options))</code></pre>

<p>This function is deprecated. Use num_cmp with the units option instead:</p>

<pre><code>ANS(num_cmp($correct_ans, units=&gt;$units));</code></pre>

<h2 id="DEPRECATED-std_num_str_cmp">[DEPRECATED] std_num_str_cmp()</h2>

<pre><code>ANS(std_num_str_cmp($correctAnswer, $ra_legalStrings, $relTol, $format, $zeroLevel, $zeroLevelTol))</code></pre>

<p>This function is deprecated. Use num_cmp() with the strings option instead:</p>

<pre><code>ANS(num_cmp($correctAnswer, strings=&gt;$ra_legalStrings, ...));</code></pre>

<a href="#_podtop_"><h1 id="SEE-ALSO">SEE ALSO</h1></a>

<p><a href="https://openwebwork.github.io/pg-docs/pod//pg/macros/core/PGanswermacros.html">PGanswermacros.pl</a>, <a href="https://openwebwork.github.io/pg-docs/pod//pg/doc/UsingMathObjects.html">UsingMathObjects</a>.</p>

		</div>
	</div>
</body>
</html>
